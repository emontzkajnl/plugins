(()=>{"use strict";function a(a,t){this.blogId=a,this.propertyIds="string"==typeof t?[t]:t,this.normalTrackingDone=!1,this.clickTimer=null;const e=this;return this.getQueryString=function(a){const t=document.createElement("a");t.href=a;let e=t.search;if(e.length&&(e=e.substr(1),e=e.split("&"),e.length)){const a={};for(const t in e){const d=e[t].split("=");a[d[0]]=d[1]}return a}return[]},this.appendQueryString=function(a,t){for(const e in t)-1!==a.indexOf("?")?a+="&"+e+"="+t[e]:a+="?"+e+"="+t[e];return a},this.trackImpressions=function(a){void 0===a&&(a=!1);let t=[];if(!this.normalTrackingDone&&AdvAdsTrackingUtils.hasAd(AdvAdsTrackingUtils.adsByBlog(advads_tracking_ads,e.blogId))&&(t=t.concat(advads_tracking_ads[e.blogId])),"frontend"===advads_tracking_methods[e.blogId]&&(t=[]),a?void 0!==advadsGATracking.delayedAds&&AdvAdsTrackingUtils.hasAd(AdvAdsTrackingUtils.adsByBlog(advadsGATracking.delayedAds,e.blogId))&&(t=t.concat(advadsGATracking.delayedAds[e.blogId]),advadsGATracking.delayedAds[e.blogId]=[]):void 0!==advadsGATracking.deferedAds&&AdvAdsTrackingUtils.hasAd(AdvAdsTrackingUtils.adsByBlog(advadsGATracking.deferedAds,e.blogId))&&(t=t.concat(advadsGATracking.deferedAds[e.blogId]),advadsGATracking.deferedAds[e.blogId]=[]),"undefined"!=typeof advads&&void 0!==advads.privacy.is_ad_decoded&&(t=t.filter(advads.privacy.is_ad_decoded)),t.length){for(const a in t)void 0!==advads_gatracking_allads[e.blogId][t[a]]&&advads_gatracking_allads[e.blogId][t[a]].impression&&e.sendEvent(advancedAds.tracking.googleEvents.impression,{event_category:"Advanced Ads",event_label:"["+t[a]+"] "+advads_gatracking_allads[e.blogId][t[a]].title,non_interaction:!0});this.normalTrackingDone=!0}},this.trackClick=function(a,t,d,n){void 0===t&&(t=!0);const s={event_category:"Advanced Ads",event_label:"["+a+"] "+advads_gatracking_allads[e.blogId][a].title,non_interaction:!0};if(!d&&!n)return void e.sendEvent(advancedAds.tracking.googleEvents.click,s);let i=advads_gatracking_allads[e.blogId][a].target;void 0===advadsGATracking.postContext&&(i=i.replace("[CAT_SLUG]",advadsGATracking.postContext.cats),i=i.replace("[POST_ID]",advadsGATracking.postContext.postID),i=i.replace("[POST_SLUG]",advadsGATracking.postContext.postSlug)),i=i.replace("[AD_ID]",a);const c=n.getAttribute("href");t?i=c:(i=e.appendQueryString(i,e.getQueryString(c)),void 0!==advads_gatracking_transmitpageqs[e.blogId]&&advads_gatracking_transmitpageqs[e.blogId][a]&&(i=e.appendQueryString(i,e.getQueryString(document.location.href))));if(!!n.getAttribute("target"))e.sendEvent(advancedAds.tracking.googleEvents.click,s),t||n.setAttribute("href",i);else{function r(){null!==e.clickTimer&&(clearTimeout(e.clickTimer),e.clickTimer=null),window.location=i}d.preventDefault(),e.clickTimer=setTimeout(function(){r()},1e3),s.event_callback=r,e.sendEvent(advancedAds.tracking.googleEvents.click,s)}},this.sendEvent=(a,t)=>{e.propertyIds.forEach(e=>{t.send_to=e,gtag("event",a,structuredClone(t))})},function(){if("function"!=typeof gtag){const a=document.createElement("script");a.src="https://www.googletagmanager.com/gtag/js",a.async=!0,document.body.appendChild(a),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date)}const a={send_page_view:!1,transport_type:"beacon"};window.advads_gatracking_anonym&&(a.anonymize_ip=!0),e.propertyIds.forEach(t=>{gtag("config",t,a)}),document.addEventListener("advadsGADeferedTrack",function(){e.trackImpressions(!1)}),document.addEventListener("advadsGADelayedTrack",function(){e.trackImpressions(!0)}),e.trackImpressions()}(),this}window.advancedAdsGAInstances={instances:[],getInstance(t){return void 0===this.instances[t]&&(this.instances[t]=new a(t,advads_gatracking_uids[t])),this.instances[t]}},document.addEventListener("DOMContentLoaded",function(){for(let a in advads_tracking_methods)if(a=parseInt(a,10),!isNaN(a)&&AdvAdsTrackingUtils.blogUseGA(a)){if("undefined"!=typeof advads&&"unknown"===advads.privacy.get_state())return void document.addEventListener("advanced_ads_privacy",function(t){"not_needed"!==t.detail.state&&"accepted"!==t.detail.state||advancedAdsGAInstances.getInstance(a)});advancedAdsGAInstances.getInstance(a)}})})();