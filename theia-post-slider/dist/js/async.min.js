!function(){var n,v={};function d(){}function f(n){return n}function t(n){return!!n}function e(n){return!n}var r="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;function l(n){return function(){if(null===n)throw new Error("Callback was already called.");n.apply(this,arguments),n=null}}function g(n){return function(){null!==n&&(n.apply(this,arguments),n=null)}}null!=r&&(n=r.async),v.noConflict=function(){return r.async=n,v};var u=Object.prototype.toString,k=Array.isArray||function(n){return"[object Array]"===u.call(n)};function o(n){return k(n)||"number"==typeof n.length&&0<=n.length&&n.length%1==0}function b(n,t){for(var e=-1,r=n.length;++e<r;)t(n[e],e,n)}function a(n,t){for(var e=-1,r=n.length,u=Array(r);++e<r;)u[e]=t(n[e],e,n);return u}function i(n){return a(Array(n),function(n,t){return t})}function w(n,t){for(var e=0;e<n.length;e++)if(n[e]===t)return e;return-1}var O=Object.keys||function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};function s(n){var t,e,r=-1;return o(n)?(t=n.length,function(){return++r<t?r:null}):(e=O(n),t=e.length,function(){return++r<t?e[r]:null})}function S(r,u){return u=null==u?r.length-1:+u,function(){for(var n=Math.max(arguments.length-u,0),t=Array(n),e=0;e<n;e++)t[e]=arguments[e+u];switch(u){case 0:return r.call(this,t);case 1:return r.call(this,arguments[0],t)}}}function c(r){return function(n,t,e){return r(n,e)}}var p="function"==typeof setImmediate&&setImmediate,h=p?function(n){p(n)}:function(n){setTimeout(n,0)};function y(a){return function(e,r,u){u=g(u||d);var i=s(e=e||[]);if(a<=0)return u(null);var o=!1,c=0,f=!1;!function t(){if(o&&c<=0)return u(null);for(;c<a&&!f;){var n=i();if(null===n)return o=!0,void(c<=0&&u(null));c+=1,r(e[n],n,l(function(n){c-=1,n?(u(n),f=!0):t()}))}}()}}function m(r){return function(n,t,e){return r(v.eachOf,n,t,e)}}function E(u){return function(n,t,e,r){return u(y(t),n,e,r)}}function L(r){return function(n,t,e){return r(v.eachOfSeries,n,t,e)}}function j(n,t,u,e){e=g(e||d);var i=o(t=t||[])?[]:{};n(t,function(n,e,r){u(n,function(n,t){i[e]=t,r(n)})},function(n){e(n,i)})}function I(n,t,u,e){var i=[];n(t,function(t,e,r){u(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){e(a(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})}function x(n,t,e,r){I(n,t,function(n,t){e(n,function(n){t(!n)})},r)}function A(o,c,f){return function(n,t,r,u){function e(){u&&u(f(!1,void 0))}function i(t,n,e){if(!u)return e();r(t,function(n){u&&c(n)&&(u(f(!0,t)),u=r=!1),e()})}3<arguments.length?o(n,t,i,e):(u=r,r=t,o(n,i,e))}}function T(n,t){return t}function z(n,t,e){e=e||d;var u=o(t)?[]:{};n(t,function(n,e,r){n(S(function(n,t){t.length<=1&&(t=t[0]),u[e]=t,r(n)}))},function(n){e(n,u)})}function q(n,t,r,e){var u=[];n(t,function(n,t,e){r(n,function(n,t){u=u.concat(t||[]),e(n)})},function(n){e(n,u)})}function P(r,n,t){if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");function e(e,n,r,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");if(e.started=!0,k(n)||(n=[n]),0===n.length&&e.idle())return v.setImmediate(function(){e.drain()});b(n,function(n){var t={data:n,callback:u||d};r?e.tasks.unshift(t):e.tasks.push(t),e.tasks.length===e.concurrency&&e.saturated()}),v.setImmediate(e.process)}function u(t,e){return function(){i-=1;var r=!1,n=arguments;b(e,function(e){b(o,function(n,t){n!==e||r||(o.splice(t,1),r=!0)}),e.callback.apply(e,n)}),t.tasks.length+i===0&&t.drain(),t.process()}}var i=0,o=[],c={tasks:[],concurrency:n,payload:t,saturated:d,empty:d,drain:d,started:!1,paused:!1,push:function(n,t){e(c,n,!1,t)},kill:function(){c.drain=d,c.tasks=[]},unshift:function(n,t){e(c,n,!0,t)},process:function(){for(;!c.paused&&i<c.concurrency&&c.tasks.length;){var n=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),t=a(n,function(n){return n.data});0===c.tasks.length&&c.empty(),i+=1,o.push(n[0]);var e=l(u(c,n));r(t,e)}},length:function(){return c.tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return c.tasks.length+i===0},pause:function(){c.paused=!0},resume:function(){if(!1!==c.paused){c.paused=!1;for(var n=Math.min(c.concurrency,c.tasks.length),t=1;t<=n;t++)v.setImmediate(c.process)}}};return c}function C(e){return S(function(n,t){n.apply(null,t.concat([S(function(n,t){"object"==typeof console&&(n?console.error&&console.error(n):console[e]&&b(t,function(n){console[e](n)}))})]))})}function H(r){return function(n,t,e){r(i(n),t,e)}}function M(i){return S(function(t,n){var e=S(function(r){var u=this,n=r.pop();return i(t,function(n,t,e){n.apply(u,r.concat([e]))},n)});return n.length?e.apply(this,n):e})}function U(r){return S(function(n){var t=n.pop();n.push(function(){var n=arguments;e?v.setImmediate(function(){t.apply(null,n)}):t.apply(null,n)});var e=!0;r.apply(this,n),e=!1})}"object"==typeof process&&"function"==typeof process.nextTick?v.nextTick=process.nextTick:v.nextTick=h,v.setImmediate=p?h:v.nextTick,v.forEach=v.each=function(n,t,e){return v.eachOf(n,c(t),e)},v.forEachSeries=v.eachSeries=function(n,t,e){return v.eachOfSeries(n,c(t),e)},v.forEachLimit=v.eachLimit=function(n,t,e,r){return y(t)(n,c(e),r)},v.forEachOf=v.eachOf=function(n,t,e){e=g(e||d);for(var r,u=s(n=n||[]),i=0;null!=(r=u());)i+=1,t(n[r],r,l(o));function o(n){i--,n?e(n):null===r&&i<=0&&e(null)}0===i&&e(null)},v.forEachOfSeries=v.eachOfSeries=function(n,r,u){u=g(u||d);var i=s(n=n||[]),o=i();!function t(){var e=!0;if(null===o)return u(null);r(n[o],o,l(function(n){if(n)u(n);else{if(null===(o=i()))return u(null);e?v.setImmediate(t):t()}})),e=!1}()},v.forEachOfLimit=v.eachOfLimit=function(n,t,e,r){y(t)(n,e,r)},v.map=m(j),v.mapSeries=L(j),v.mapLimit=E(j),v.inject=v.foldl=v.reduce=function(n,r,u,t){v.eachOfSeries(n,function(n,t,e){u(r,n,function(n,t){r=t,e(n)})},function(n){t(n,r)})},v.foldr=v.reduceRight=function(n,t,e,r){var u=a(n,f).reverse();v.reduce(u,t,e,r)},v.transform=function(n,r,u,t){3===arguments.length&&(t=u,u=r,r=k(n)?[]:{}),v.eachOf(n,function(n,t,e){u(r,n,t,e)},function(n){t(n,r)})},v.select=v.filter=m(I),v.selectLimit=v.filterLimit=E(I),v.selectSeries=v.filterSeries=L(I),v.reject=m(x),v.rejectLimit=E(x),v.rejectSeries=L(x),v.any=v.some=A(v.eachOf,t,f),v.someLimit=A(v.eachOfLimit,t,f),v.all=v.every=A(v.eachOf,e,e),v.everyLimit=A(v.eachOfLimit,e,e),v.detect=A(v.eachOf,f,T),v.detectSeries=A(v.eachOfSeries,f,T),v.detectLimit=A(v.eachOfLimit,f,T),v.sortBy=function(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:r<e?1:0}v.map(n,function(e,r){t(e,function(n,t){n?r(n):r(null,{value:e,criteria:t})})},function(n,t){if(n)return e(n);e(null,a(t.sort(r),function(n){return n.value}))})},v.auto=function(c,f,a){"function"==typeof f&&(a=f,f=null),a=g(a||d);var n=O(c),t=n.length;if(!t)return a(null);f=f||t;var l={},s=0,p=!1,h=[];function y(n){h.unshift(n)}function m(){t--,b(h.slice(0),function(n){n()})}y(function(){t||a(null,l)}),b(n,function(r){if(!p){for(var n,e=k(c[r])?c[r]:[c[r]],u=S(function(n,t){if(s--,t.length<=1&&(t=t[0]),n){var e={};!function(t,e){b(O(t),function(n){e(t[n],n)})}(l,function(n,t){e[t]=n}),e[r]=t,p=!0,a(n,e)}else l[r]=t,v.setImmediate(m)}),t=e.slice(0,e.length-1),i=t.length;i--;){if(!(n=c[t[i]]))throw new Error("Has nonexistent dependency in "+t.join(", "));if(k(n)&&0<=w(n,r))throw new Error("Has cyclic dependencies")}o()?(s++,e[e.length-1](u,l)):y(function n(){o()&&(s++,0<=(t=w(h,n))&&h.splice(t,1),e[e.length-1](u,l));var t})}function o(){return s<f&&function(n,r,u){return b(n,function(n,t,e){u=r(u,n,t,e)}),u}(t,function(n,t){return n&&l.hasOwnProperty(t)},!0)&&!l.hasOwnProperty(r)}})},v.retry=function(n,t,e){var i=[],o={times:5,interval:0};var r=arguments.length;if(r<1||3<r)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");function u(e,t){function n(n,r){return function(e){n(function(n,t){e(!n||r,{err:n,result:t})},t)}}function r(t){return function(n){setTimeout(function(){n(null)},t)}}for(;o.times;){var u=!(o.times-=1);i.push(n(o.task,u)),!u&&0<o.interval&&i.push(r(o.interval))}v.series(i,function(n,t){t=t[t.length-1],(e||o.callback)(t.err,t.result)})}return r<=2&&"function"==typeof n&&(e=t,t=n),"function"!=typeof n&&function(n,t){if("number"==typeof t)n.times=parseInt(t,10)||5;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);n.times=parseInt(t.times,10)||5,n.interval=parseInt(t.interval,10)||0}}(o,n),o.callback=e,o.task=t,o.callback?u():u},v.waterfall=function(n,i){if(i=g(i||d),!k(n)){var t=new Error("First argument to waterfall must be an array of functions");return i(t)}if(!n.length)return i();!function r(u){return S(function(n,t){if(n)i.apply(null,[n].concat(t));else{var e=u.next();e?t.push(r(e)):t.push(i),U(u).apply(null,t)}})}(v.iterator(n))()},v.parallel=function(n,t){z(v.eachOf,n,t)},v.parallelLimit=function(n,t,e){z(y(t),n,e)},v.series=function(n,t){z(v.eachOfSeries,n,t)},v.iterator=function(r){return function n(t){function e(){return r.length&&r[t].apply(null,arguments),e.next()}return e.next=function(){return t<r.length-1?n(t+1):null},e}(0)},v.apply=S(function(t,e){return S(function(n){return t.apply(null,e.concat(n))})}),v.concat=m(q),v.concatSeries=L(q),v.whilst=function(e,r,u){if(u=u||d,e()){var i=S(function(n,t){n?u(n):e.apply(this,t)?r(i):u.apply(null,[null].concat(t))});r(i)}else u(null)},v.doWhilst=function(n,t,e){var r=0;return v.whilst(function(){return++r<=1||t.apply(this,arguments)},n,e)},v.until=function(n,t,e){return v.whilst(function(){return!n.apply(this,arguments)},t,e)},v.doUntil=function(n,t,e){return v.doWhilst(n,function(){return!t.apply(this,arguments)},e)},v.during=function(e,r,u){u=u||d;var i=S(function(n,t){n?u(n):(t.push(o),e.apply(this,t))}),o=function(n,t){n?u(n):t?r(i):u(null)};e(o)},v.doDuring=function(n,t,e){var r=0;v.during(function(n){r++<1?n(null,!0):t.apply(this,arguments)},n,e)},v.queue=function(e,n){return P(function(n,t){e(n[0],t)},n,1)},v.priorityQueue=function(n,t){function i(n,t){return n.priority-t.priority}function r(e,n,r,u){if(null!=u&&"function"!=typeof u)throw new Error("task callback must be a function");if(e.started=!0,k(n)||(n=[n]),0===n.length)return v.setImmediate(function(){e.drain()});b(n,function(n){var t={data:n,priority:r,callback:"function"==typeof u?u:d};e.tasks.splice(function(n,t,e){for(var r=-1,u=n.length-1;r<u;){var i=r+(u-r+1>>>1);0<=e(t,n[i])?r=i:u=i-1}return r}(e.tasks,t,i)+1,0,t),e.tasks.length===e.concurrency&&e.saturated(),v.setImmediate(e.process)})}var u=v.queue(n,t);return u.push=function(n,t,e){r(u,n,t,e)},delete u.unshift,u},v.cargo=function(n,t){return P(n,1,t)},v.log=C("log"),v.dir=C("dir"),v.memoize=function(e,r){var i={},o={},c=Object.prototype.hasOwnProperty;r=r||f;var n=S(function(n){var t=n.pop(),u=r.apply(null,n);c.call(i,u)?v.setImmediate(function(){t.apply(null,i[u])}):c.call(o,u)?o[u].push(t):(o[u]=[t],e.apply(null,n.concat([S(function(n){i[u]=n;var t=o[u];delete o[u];for(var e=0,r=t.length;e<r;e++)t[e].apply(null,n)})])))});return n.memo=i,n.unmemoized=e,n},v.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},v.times=H(v.map),v.timesSeries=H(v.mapSeries),v.timesLimit=function(n,t,e,r){return v.mapLimit(i(n),t,e,r)},v.seq=function(){var t=arguments;return S(function(n){var r=this,e=n[n.length-1];"function"==typeof e?n.pop():e=d,v.reduce(t,n,function(n,t,e){t.apply(r,n.concat([S(function(n,t){e(n,t)})]))},function(n,t){e.apply(r,[n].concat(t))})})},v.compose=function(){return v.seq.apply(null,Array.prototype.reverse.call(arguments))},v.applyEach=M(v.eachOf),v.applyEachSeries=M(v.eachOfSeries),v.forever=function(n,t){var e=l(t||d),r=U(n);!function n(t){if(t)return e(t);r(n)}()},v.ensureAsync=U,v.constant=S(function(n){var t=[null].concat(n);return function(n){return n.apply(this,t)}}),v.wrapSync=v.asyncify=function(r){return S(function(n){var t,e=n.pop();try{t=r.apply(this,n)}catch(n){return e(n)}!function(n){var t=typeof n;return"function"==t||"object"==t&&!!n}(t)||"function"!=typeof t.then?e(null,t):t.then(function(n){e(null,n)}).catch(function(n){e(n.message?n:new Error(n))})})},"object"==typeof module&&module.exports?module.exports=v:"function"==typeof define&&define.amd?define([],function(){return v}):r.async=v}();
//# sourceMappingURL=sourcemaps/async.min.js.map
